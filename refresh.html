<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Refreshing Portfolio Cache…</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#0b0b0d; color:#eaeaea; display:flex; align-items:center; justify-content:center; min-height:100vh; margin:0; }
    .card { max-width:640px; padding:28px 32px; border:1px solid #2a2a2f; border-radius:14px; background:#121217; box-shadow:0 20px 60px rgba(0,0,0,.4); }
    h1 { margin:0 0 8px; font-size:22px; }
    p { margin:8px 0; color:#b5b5bd; }
    code { color:#8ad; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Refreshing portfolio cache…</h1>
    <p>This will clear any old Service Worker cache and reload the latest site.</p>
    <p id="status">Working…</p>
  </div>

  <script>
    const statusEl = document.getElementById('status');
    async function clearAll() {
      try {
        if ('serviceWorker' in navigator) {
          const regs = await navigator.serviceWorker.getRegistrations();
          await Promise.all(regs.map(r => r.unregister()));
        }
        if ('caches' in window) {
          const keys = await caches.keys();
          await Promise.all(keys.map(k => caches.delete(k)));
        }
        statusEl.textContent = 'Done. Redirecting…';
      } catch (e) {
        statusEl.textContent = 'Done (with warnings). Redirecting…';
      }
      setTimeout(() => {
        location.href = './index.html?v=6';
      }, 800);
    }
    clearAll();
  </script>
</body>
</html>
